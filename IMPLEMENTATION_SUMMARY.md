# AI对话与互动社区功能实现

## 功能概述

已成功实现前端两大新功能模块：**AI对话** 和 **互动社区**（知识竞赛）。

## 前端实现

### 1. AI对话功能 (`AIDialogView.vue`)
**路由**: `/ai-dialog`

**功能特性**:
- 📝 自然对话界面，支持用户提问
- 🤖 AI 智能回复长三角非遗相关问题
- 💬 实时消息展示，自动滚动到最新消息
- ✨ 打字加载动画提示
- 📚 推荐问题快速输入
- 📱 响应式设计

**API 端点**:
```
POST /api/ai-dialog
请求体: { question: "用户问题" }
响应: { question, answer, timestamp }
```

### 2. 互动社区功能 (`CommunityView.vue`)
**路由**: `/community`

**分为三个阶段**:

#### 阶段一：社区首页
- 古风设计，展示活动介绍
- 装饰性扇形动画
- "开始" 按钮触发答题流程

#### 阶段二：答题竞赛
- 5道关于长三角非遗的选择题
- 实时进度条显示答题进度
- 选项交互：点击选择，提交答案
- 答题后显示正确答案和详细解释
- 支持前后题切换

#### 阶段三：成绩评定
- 显示总分（满分 50 分）
- 计算准确率百分比
- 统计耗时
- 个性化评语（4个等级）
- 重新答题或返回首页

### 3. 导航栏更新
- 新增 "互动社区" 导航链接（索引: `/community`）
- 更新 "AI对话" 导航链接（索引: `/ai-dialog`）
- 更新路由跳转逻辑

## 后端实现

### 新增 API 路由 (`backend/routes/api.js`)

#### 1. AI 对话 API
```
POST /api/ai-dialog
功能: 处理用户提问，返回 AI 回复
预设答案: 关于什么是非遗、项目介绍、学习方法等
```

#### 2. 竞赛问题 API
```
GET /api/quiz-questions
功能: 获取所有竞赛题目（可选，前端已内置）
返回: 包含题目、选项、答案的 JSON 数组
```

#### 3. 提交答题结果 API
```
POST /api/submit-quiz
功能: 保存用户答题结果（可扩展到数据库）
请求体: { answers[], timeSpent, userId }
响应: 计算后的分数和结果
```

### CORS 配置
已在 `app.js` 中添加 CORS 中间件，允许跨域请求。

## 使用说明

### 启动应用
```bash
# 后端启动（在 backend 目录）
npm start

# 前端启动（在 front 目录）
npm run dev
```

### 访问路由
- **AI对话**: http://localhost:5173/ai-dialog
- **互动社区**: http://localhost:5173/community
- 两个功能都可从导航栏 "AI对话" 和 "互动社区" 菜单项访问

## 设计特色

### 视觉设计
✅ 古风与现代结合的 UI
✅ 文艺的色彩搭配（棕色、米色系）
✅ 平滑的动画过渡效果
✅ 响应式布局，适配各种屏幕

### 用户体验
✅ 直观的交互流程
✅ 即时的操作反馈
✅ 详细的答题解释
✅ 个性化的成绩评定

## 未来优化方向

- [ ] 接入真实 AI 服务（如 OpenAI、百度文心等）
- [ ] 数据库持久化用户答题记录
- [ ] 排行榜和成就系统
- [ ] 更多竞赛题目和难度选择
- [ ] 用户学习路径个性化推荐
- [ ] 实时互动功能（如用户评论、讨论等）

## 文件清单

### 前端新增文件
- `src/views/AIDialogView.vue` - AI对话页面
- `src/views/CommunityView.vue` - 互动社区页面

### 后端新增文件
- `routes/api.js` - API 路由定义

### 已修改文件
- `src/router/index.ts` - 添加新路由配置
- `src/components/NavBar.vue` - 更新导航菜单
- `app.js` - 注册 API 路由和 CORS 中间件
